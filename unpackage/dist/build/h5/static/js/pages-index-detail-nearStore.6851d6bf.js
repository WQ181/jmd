(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-detail-nearStore"],{4347:function(t,e,i){var n=i("498a");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("0385ac4a",n,!0,{sourceMap:!1,shadowMode:!1})},"498a":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"uni-page-body[data-v-06c2b713]{background-color:#f5f5f5}\r\n/* 顶部搜索框 start*/.box[data-v-06c2b713]{width:100%;text-align:left}uni-input[data-v-06c2b713]{width:%?380?%;text-align:left}.click[data-v-06c2b713]{height:%?25?%;color:#999;margin-right:%?10?%;line-height:1.2;text-align:right;white-space:nowrap}\r\n/* 分类检索 */.choose[data-v-06c2b713]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;\r\n\t/* position: fixed; */margin-bottom:%?4?%;width:100%;height:%?80?%;line-height:1.2;background-color:#fff}.section[data-v-06c2b713]{width:33%;text-align:center;font-size:%?25?%;font-weight:600;margin-left:10%\r\n\t/* display: flex; */\r\n\t/* flex-direction: row; */}.picker[data-v-06c2b713]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center}.smallTable[data-v-06c2b713]{padding:%?20?%;width:100%;\r\n\t/* height: 80upx; */font-size:%?30?%;background-color:#f5f5f5;color:#228b22;text-align:left}\r\n/* 商家列表 */.show[data-v-06c2b713]{\r\n\t/* height: 800upx; */background-color:#fff\r\n\t/* margin-bottom: 40upx; */}.list[data-v-06c2b713]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:%?0?% %?0?% %?26?% %?26?%;border-bottom:%?1?% solid #f3f3f3}.picture[data-v-06c2b713]{width:%?100?%;height:%?100?%;margin:%?20?%}.intro[data-v-06c2b713]{width:%?380?%;margin-left:%?20?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;white-space:normal;word-break:break-all;word-wrap:break-word;text-align:left}.name[data-v-06c2b713]{font-size:%?25?%;width:100%;color:#000;font-weight:600}.address[data-v-06c2b713]{font-size:%?25?%;width:100%;color:red}.tel[data-v-06c2b713]{font-size:%?25?%;width:100%;color:red}.type[data-v-06c2b713]{font-size:%?25?%;width:100%;color:red}.distance[data-v-06c2b713]{font-size:%?25?%;width:100%;color:#1aad19}.addr-img[data-v-06c2b713]{width:%?100?%;height:%?100?%;border-left:%?1?% solid #228b22}.add-img[data-v-06c2b713]{width:%?50?%;height:%?50?%;margin-left:%?40?%}\r\n/* 定位小按钮 */.cuIcon-location[data-v-06c2b713]{font-size:%?34?%;\r\n\t/* margin-left: 20upx; */display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center}.location-addrss[data-v-06c2b713]{width:%?80?%;display:inline-block;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}body.?%PAGE?%[data-v-06c2b713]{background-color:#f5f5f5}",""])},"6e5f":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("2774"));a(i("30e1")),a(i("67a4"));function a(t){return t&&t.__esModule?t:{default:t}}var o={data:function(){return{hidden:!1,keyword:"",dis:[],distance:"距离",type:"类型",other:"其他",dist:["附近","500","1000","2000","5000"],ctype:["全部","美食","电器","家具","生活用品","酒店旅游","休闲娱乐","家居建设","商业服务","生鲜水果"],join_time:["其他","最新入驻 "],list:[],lat:0,lon:0,index:0,item:[]}},created:function(){var t=this;t.lat=uni.getStorageSync("lat"),t.lat=Math.round(1e4*t.lat)/1e4,t.lon=uni.getStorageSync("lon"),t.lon=Math.round(1e4*t.lon)/1e4,this.getList()},onReachBottom:function(){uni.showToast({icon:"loading",duration:500})},onPullDownRefresh:function(){var t=this;t.distance="距离",t.type="类型",t.other="其他",t.getList(),uni.stopPullDownRefresh()},methods:{getList:function(){var t=this;uni.request({url:n.default.originUrl+"/shop/retailer/allretailer",method:"GET",success:function(e){console.log(e.data.data),t.list=e.data.data,t.item=e.data.data;for(var i=0;i<t.list.length;i++)uni.request({url:n.default.originUrl+"/wx/mp/get_location.do",data:{lng1:t.list[i].longtitude,lat1:t.list[i].latitude,lng2:t.lon,lat2:t.lat},method:"GET",success:function(e){var i=Math.round(100*e.data)/1e5;t.dis.push(i)}})},fail:function(t){console.log(t)}})},focus:function(){this.hidden=!this.hidden},search:function(t){var e=[],i=this.keyword;console.log(i);for(var n=0;n<this.list.length;n++)this.list[n].name.match(i)&&(console.log(this.list[n].name),e.push(this.list[n]));this.list=e,e.length<=0&&uni.showToast({icon:"loading",title:"暂无此商家"})},phoneNow:function(t){uni.makePhoneCall({phoneNumber:t,success:function(){console.log("成功拨打电话")}})},getStoreAddr:function(t){console.log(t),uni.openLocation({latitude:t.latitude,longitude:t.longtitude,success:function(t){console.log(t)}})},bindPickerChange:function(t){var e=this,i=t.currentTarget.dataset.column,n=t.detail.value;console.log(i,n),console.log("picker变为",n,e[i][n]);var a=e[i][n];switch(i){case"dist":e.distance=a;break;case"ctype":e.type=a;break;case"join_time":e.other=a;break}console.log("selectedDist:",e.distance,"selectedType:",e.type,"selectedJoin_time:",e.other);var o=e.item;if("ctype"==i){for(var s=[],l=0;l<o.length;l++)o[l].type.match(a)?s.push(o[l]):console.log("ooo");console.log(s),e.list=s}if("join_time"==i){for(l=0;l<o.length;l++)for(var c=0;c<o.length;c++)if(o[l].join_time<o[c].join_time){s=o[l];o[l]=o[c],o[c]=s}console.log(o),e.list=o}if("dist"==i){console.log("hhhhhh");var r=[];"附近"==a&&e.getList();for(l=0;l<this.dis.length;l++)this.dis[l]<=a?(console.log("rr"),r.push(e.list[l])):console.log("pp");e.list=r}this.index=t.detail.value},close:function(){this.keyword="",uni.showToast({icon:"loading"}),this.getList(),this.hidden=!this.hidden},gotoCompanyData:function(t){uni.setStorageSync("nearStore",t),uni.navigateTo({url:"../retailerInfo/retailerInfo"})}}};e.default=o},"7ecb":function(t,e,i){"use strict";var n=i("4347"),a=i.n(n);a.a},8783:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"box"},[i("v-uni-view",{staticClass:"cu-bar bg-cyan search"},[i("v-uni-view",{staticClass:"search-form radius"},[i("v-uni-text",{staticClass:"cuIcon-search"}),i("v-uni-input",{attrs:{type:"text",placeholder:"输入关键字"},on:{focus:function(e){e=t.$handleEvent(e),t.focus(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),i("v-uni-view",{staticClass:"cuIcon-close",on:{click:function(e){e=t.$handleEvent(e),t.close(e)}}})],1),t.hidden?i("v-uni-view",{staticClass:"action",on:{click:function(e){e=t.$handleEvent(e),t.search(e)}}},[i("v-uni-text",[t._v("搜索")])],1):t._e()],1)],1),i("v-uni-view",{staticClass:"choose"},[i("v-uni-view",{staticClass:"section"},[i("v-uni-picker",{attrs:{value:t.index,range:t.dist,"data-column":"dist"},on:{change:function(e){e=t.$handleEvent(e),t.bindPickerChange(e)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.distance)),i("v-uni-view",{staticClass:"cuIcon-down"})],1)],1)],1),i("v-uni-view",{staticClass:"section"},[i("v-uni-picker",{attrs:{value:t.index,range:t.ctype,"data-column":"ctype"},on:{change:function(e){e=t.$handleEvent(e),t.bindPickerChange(e)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.type)),i("v-uni-view",{staticClass:"cuIcon-down"})],1)],1)],1),i("v-uni-view",{staticClass:"section"},[i("v-uni-picker",{attrs:{value:t.index,range:t.join_time,"data-column":"join_time"},on:{change:function(e){e=t.$handleEvent(e),t.bindPickerChange(e)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.other)),i("v-uni-view",{staticClass:"cuIcon-down"})],1)],1)],1)],1),i("v-uni-view",{staticClass:"smallTable"},[t._v("推荐商家")]),i("v-uni-view",{staticClass:"show"},[i("v-uni-scroll-view",{attrs:{"scroll-y":""}},t._l(t.list,function(e,n){return i("v-uni-view",{key:n,staticClass:"list"},[i("v-uni-image",{staticClass:"picture",attrs:{src:e.license_image},on:{click:function(i){i=t.$handleEvent(i),t.gotoCompanyData(e)}}}),i("v-uni-view",{staticClass:"intro",on:{click:function(i){i=t.$handleEvent(i),t.gotoCompanyData(e)}}},[i("v-uni-view",{staticClass:"name"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"address"},[t._v("地址:"+t._s(e.addr))]),e.mobile?i("v-uni-view",{staticClass:"tel"},[t._v("电话:"+t._s(e.mobile))]):t._e(),i("v-uni-view",{staticClass:"type"},[t._v("分类:"+t._s(e.type))]),i("v-uni-view",{staticClass:"distance"},[t._v("距离您:"+t._s(t.dis[n])+"km")])],1),i("v-uni-view",{staticClass:"addr-img"},[e.mobile?i("v-uni-image",{staticClass:"add-img",attrs:{src:"../../static/image/dianhua.png"},on:{click:function(i){i=t.$handleEvent(i),t.phoneNow(e.mobile)}}}):t._e(),i("v-uni-image",{staticClass:"add-img",attrs:{src:"../../static/image/dizhi2.png"},on:{click:function(i){i=t.$handleEvent(i),t.getStoreAddr(e)}}})],1)],1)}),1)],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},9076:function(t,e,i){"use strict";i.r(e);var n=i("6e5f"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},ab72:function(t,e,i){"use strict";i.r(e);var n=i("8783"),a=i("9076");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("7ecb");var s=i("2877"),l=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"06c2b713",null);e["default"]=l.exports}}]);